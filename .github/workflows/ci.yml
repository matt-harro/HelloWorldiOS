name: iOS CI

on:
	push:
		branches:
			- main
	pull_request:
		branches:
			- main

jobs:
	build:
		runs-on: macos-latest

	steps:
		- name: Checkout code
			uses: actions/checkout@v4

		- name: Set up Xcode
			uses: maxim-lobanov/setup-xcode@v1
			with:
				xcode-version: latest

		- name: Install dependancies
			run: pod install || true

		- name: Build & Test
			run: |
				xcodebuild clean build test \
					-project HelloWorld.xcodeproj \
					-scheme HelloWorld \
					-destination 'platform-iOS Simulator,name=iPhone 14' | xcpretty
